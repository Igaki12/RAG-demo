- 09:05 `/srv/rag-demo/app` を `/srv/rag-demo/app_pre_20251122` へ退避し、最新リポジトリを導入できる状態を確保。
- 09:10 `https://github.com/Igaki12/News-network-UI-demo.git` を再クローンし、混同を避けるためリポジトリ同梱の AGENTS.md を `AGENTS_for_React.md` に改名。
- 09:15 `vite.config.ts` を `.env` の `VITE_BASE_PATH`（未設定時は `/`）を参照する形式に更新し、VPS と GitHub Pages の両方でビルドパスを切り替えられるように調整。
- 09:20 `/srv/rag-demo/app` で `npm install` → `npm run build` を実行（chunk >500kB 警告ありだがビルド成功）。生成された `dist/` と `docs/` を確認。
- 09:30 `dist/` を `/var/www/rag-demo/` へ rsync、`chown -R www-data` と `systemctl reload apache2` を実施。`systemctl is-active apache2` で `active` を確認（ローカル curl は引き続き制限のため未実施）。
- 11:00 DB スキーマに `email_verified` カラムと `email_verifications` テーブルを追加。`groups` / `user_group_memberships` に初期データを投入し、schema_news_learning.sql / AGENTS_about_DB.md / AGENTS.md を更新。
- 11:20 `/srv/rag-demo/app/server` に Express + mysql2 + nodemailer 構成の API を実装し、`.env` に SMTP/DB の設定テンプレートを追記。`pm2 start rag-auth`（root 実行のみ許可されているため deploy ではなく root 管理）→`pm2 save` で常駐化。
- 11:45 React 側で `/src/api/auth.ts` を新設し、サインイン／サインアップ／認証コード送信／グループ取得を API 連携へ移行。`AuthModal` で実メールベースのコード送信フローを実装し、App.tsx から demo アカウントとハードコーディングを撤廃。
- 12:05 フロントエンドを `npm run build` → `/var/www/rag-demo` へ再配備。ローカルでの `curl` チェックは引き続き制限のため不可、ブラウザでの確認を依頼。
- 12:30 `/api/auth/groups` が SQL 予約語 `groups` を引用していなかったため 500 エラーとなっていた問題を修正（`SELECT ... FROM \`groups\`` に変更）。`pm2 restart rag-auth` で API を再起動。
- 13:00 `news_full_mcq3_type9_entities_novectors.jsonl` の構造を確認し、`/srv/rag-demo/app/server/scripts/import-jsonl.js` を作成。subject_codes / entities / questions まで含めて MySQL に投入するロジックを実装し、`node scripts/import-jsonl.js` で 2,159 行を取り込み（重複除外後 1,696 記事）。
- 13:20 AGENTS_about_DB.md に JSONL 取り込み手順を追記し、トップ UI から任意ファイルのアップロード文言を削除（サンプルデータボタンのみ残存）。AuthLanding から MySQL テーブルに言及する説明も削除。
- 13:25 `npm run build` → `/var/www/rag-demo` へ再配備し、Apache を reload。
